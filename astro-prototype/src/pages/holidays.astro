---
import BaseLayout from '../layouts/BaseLayout.astro';
import PageHeader from '../components/ui/PageHeader.astro';
import Card from '../components/ui/Card.astro';
import CTASection from '../components/ui/CTASection.astro';
import { seasonalMenus, yearRoundMenus, getFeaturedMenu } from '../data';

const featuredMenu = getFeaturedMenu();
---

<BaseLayout 
  title="Menus" 
  description="Browse our seasonal holiday menus and year-round favorites. Valentine's Day, Easter, Christmas cookies, custom cakes, and more."
>
  <PageHeader 
    title="Our Menus"
    subtitle="Seasonal treats and year-round favorites"
  />

  <div class="menus-container">
    
    <!-- Featured Season Callout -->
    {featuredMenu && (
      <section class="featured-callout">
        <a href={`/${featuredMenu.slug}/`} class="featured-link">
          <div class="featured-image">
            <img src={featuredMenu.headerImage} alt={featuredMenu.title} loading="eager" />
            <div class="featured-badge">Now Available!</div>
          </div>
          <div class="featured-content">
            <h2>{featuredMenu.title}</h2>
            <p>{featuredMenu.subtitle}</p>
            <span class="featured-cta">View Menu & Order â†’</span>
          </div>
        </a>
      </section>
    )}

    <!-- Seasonal Menus -->
    <section class="menu-section">
      <h2>Seasonal Menus</h2>
      <p class="section-intro">Special treats for holidays and celebrations throughout the year.</p>
      
      <div class="menu-grid">
        {seasonalMenus.map((menu) => (
          <Card href={`/${menu.slug}/`} variant="default" padding="md">
            <div slot="image">
              <img src={menu.headerImage || '/assets/img/thumbprint.jpg'} alt={menu.title} loading="lazy" />
            </div>
            <h3 slot="title">{menu.title}</h3>
            <p slot="description">{menu.subtitle}</p>
          </Card>
        ))}
      </div>
    </section>

    <!-- Year-Round Menus -->
    <section class="menu-section">
      <h2>Year-Round Favorites</h2>
      <p class="section-intro">Available any time for birthdays, events, or just because!</p>
      
      <div class="menu-grid">
        {yearRoundMenus.map((menu) => (
          <Card href={`/${menu.slug}/`} variant="default" padding="md">
            <div slot="image">
              <img src={menu.headerImage || '/assets/img/thumbprint.jpg'} alt={menu.title} loading="lazy" />
            </div>
            <h3 slot="title">{menu.title}</h3>
            <p slot="description">{menu.subtitle}</p>
          </Card>
        ))}
      </div>
    </section>
  </div>

  <!-- CTA Section -->
  <CTASection 
    title="Don't see what you're looking for?"
    subtitle="I love custom orders! Reach out to discuss your ideas."
    primaryText="Contact Me"
    primaryHref="/contact/"
    variant="cream"
  />
</BaseLayout>

<style>
  .menus-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 var(--space-lg);
  }

  /* Featured Callout */
  .featured-callout {
    margin-bottom: var(--space-4xl);
  }

  .featured-link {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-2xl);
    background: var(--white);
    border-radius: 16px;
    overflow: hidden;
    box-shadow: var(--shadow-soft);
    text-decoration: none;
    color: inherit;
    transition: all var(--transition-smooth);
  }

  .featured-link:hover {
    box-shadow: var(--shadow-medium);
    transform: translateY(-4px);
  }

  .featured-image {
    position: relative;
    aspect-ratio: 4 / 3;
  }

  .featured-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .featured-badge {
    position: absolute;
    top: var(--space-md);
    left: var(--space-md);
    background: var(--sage);
    color: var(--white);
    padding: var(--space-xs) var(--space-md);
    border-radius: 20px;
    font-size: 0.875rem;
    font-weight: 600;
  }

  .featured-content {
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: var(--space-2xl);
  }

  .featured-content h2 {
    margin-bottom: var(--space-sm);
  }

  .featured-content p {
    color: var(--warm-gray);
    margin-bottom: var(--space-lg);
  }

  .featured-cta {
    font-weight: 600;
    color: var(--sage);
  }

  /* Menu Sections */
  .menu-section {
    margin-bottom: var(--space-4xl);
  }

  .menu-section h2 {
    text-align: center;
    margin-bottom: var(--space-sm);
  }

  .section-intro {
    text-align: center;
    color: var(--warm-gray);
    margin-bottom: var(--space-2xl);
    max-width: none;
  }

  .menu-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--space-xl);
  }

  @media (max-width: 768px) {
    .featured-link {
      grid-template-columns: 1fr;
    }

    .featured-content {
      padding: var(--space-lg);
    }
  }
</style>
