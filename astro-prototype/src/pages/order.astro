---
import BaseLayout from '../layouts/BaseLayout.astro';
import PageHeader from '../components/ui/PageHeader.astro';
import Card from '../components/ui/Card.astro';
import Button from '../components/ui/Button.astro';
import CTASection from '../components/ui/CTASection.astro';
import GoogleFormEmbed from '../components/forms/GoogleFormEmbed.astro';
import { getFeaturedMenu } from '../data/menus';

const featuredMenu = getFeaturedMenu();
const googleFormUrl = 'https://docs.google.com/forms/d/e/1FAIpQLSf_VXJVtlP_7VwEm6qwcfbmFA719NcxRj-Rs8WCRxmUYEDqDg/viewform';
---

<BaseLayout 
  title="Place Your Order" 
  description="Order custom cookies, cakes, and seasonal treats from Thymeless Treats Bakery. Fill out our form to get started!"
>
  <PageHeader 
    title="Ready to Order?"
    subtitle="Let's make your celebration sweeter!"
  />

  <div class="order-container">
    <!-- Status Banner -->
    <div class="status-banner">
      <h2>üíù {featuredMenu.title} Orders Now Open!</h2>
      <p>Order early to secure your dates ‚Äî orders must be placed at least 5 days in advance.</p>
    </div>

    <!-- How to Order -->
    <section class="how-to-order">
      <h2>How to Order</h2>
      <p class="intro">Pick what works best for you! Browse our menus for ideas, then fill out the order form below.</p>
      
      <div class="order-options">
        <Card variant="elevated">
          <span slot="icon">üìã</span>
          <span slot="title">Browse Seasonal Menus</span>
          <span slot="description">Check out our current offerings with photos and pricing.</span>
          <span slot="action">
            <Button href="/holidays/" variant="secondary" size="sm">View Menus</Button>
          </span>
        </Card>

        <Card variant="elevated">
          <span slot="icon">üç™</span>
          <span slot="title">Custom Cookies</span>
          <span slot="description">Planning a birthday, shower, or special event? We create custom designs!</span>
          <span slot="action">
            <Button href="/cookies/" variant="secondary" size="sm">Learn More</Button>
          </span>
        </Card>

        <Card variant="elevated">
          <span slot="icon">üéÇ</span>
          <span slot="title">Custom Cakes</span>
          <span slot="description">Celebrate with a custom cake designed just for you.</span>
          <span slot="action">
            <Button href="/cakes/" variant="secondary" size="sm">View Gallery</Button>
          </span>
        </Card>
      </div>
    </section>

    <!-- Order Form Section -->
    <section class="order-form-section" id="order-form">
      <h2>Place Your Order</h2>
      <p class="intro">Fill out the form below and I'll get back to you within 24 hours with availability and pricing!</p>
      
      <GoogleFormEmbed 
        formUrl={googleFormUrl}
        title="Thymeless Treats Order Form"
        height="1200px"
      />
    </section>

    <!-- What to Expect -->
    <section class="what-to-expect">
      <h2>What Happens Next?</h2>
      <div class="steps-grid">
        <div class="step">
          <div class="step-number">1</div>
          <h3>Submit Your Request</h3>
          <p>Fill out the form with your details and what you'd like to order.</p>
        </div>
        <div class="step">
          <div class="step-number">2</div>
          <h3>Get a Quote</h3>
          <p>I'll review your request and send you pricing within 24 hours.</p>
        </div>
        <div class="step">
          <div class="step-number">3</div>
          <h3>Confirm & Pay</h3>
          <p>Once you approve, a 50% deposit secures your order date.</p>
        </div>
        <div class="step">
          <div class="step-number">4</div>
          <h3>Pickup Your Treats!</h3>
          <p>Pick up your fresh-baked goodies on your scheduled date.</p>
        </div>
      </div>
    </section>
  </div>

  <CTASection 
    title="Questions?"
    subtitle="Not sure what to order? Have dietary restrictions? Just want to chat? I'd love to hear from you!"
    primaryText="Contact Me"
    primaryHref="/contact/"
    variant="cream"
  />
</BaseLayout>

<style>
  .order-container {
    max-width: 1000px;
    margin: 0 auto;
    padding: 0 var(--space-lg);
  }

  /* Status Banner */
  .status-banner {
    background: linear-gradient(135deg, var(--sage) 0%, var(--sage-dark) 100%);
    color: var(--white);
    padding: var(--space-xl) var(--space-2xl);
    border-radius: 16px;
    text-align: center;
    margin-bottom: var(--space-3xl);
    box-shadow: var(--shadow-medium);
  }

  .status-banner h2 {
    font-family: var(--font-heading);
    font-size: clamp(1.5rem, 4vw, 2rem);
    margin-bottom: var(--space-sm);
    color: var(--white);
  }

  .status-banner p {
    font-size: 1.0625rem;
    margin: 0;
    opacity: 0.95;
    max-width: none;
  }

  /* Section Styling */
  section {
    margin-bottom: var(--space-3xl);
  }

  section h2 {
    font-family: var(--font-heading);
    font-size: clamp(1.75rem, 4vw, 2.25rem);
    color: var(--charcoal);
    text-align: center;
    margin-bottom: var(--space-md);
  }

  .intro {
    text-align: center;
    color: var(--warm-gray);
    max-width: 600px;
    margin: 0 auto var(--space-2xl);
    font-size: 1.0625rem;
  }

  /* Order Options Grid */
  .order-options {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--space-lg);
  }

  /* Order Form Section */
  .order-form-section {
    padding-top: var(--space-xl);
  }

  /* Steps Grid */
  .steps-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--space-xl);
  }

  .step {
    text-align: center;
    padding: var(--space-lg);
  }

  .step-number {
    width: 50px;
    height: 50px;
    background: var(--sage);
    color: var(--white);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: var(--font-heading);
    font-size: 1.5rem;
    font-weight: 700;
    margin: 0 auto var(--space-md);
  }

  .step h3 {
    font-family: var(--font-heading);
    font-size: 1.25rem;
    color: var(--charcoal);
    margin-bottom: var(--space-sm);
  }

  .step p {
    color: var(--warm-gray);
    font-size: 0.9375rem;
    max-width: none;
  }

  /* What to Expect Background */
  .what-to-expect {
    background: var(--cream);
    margin-left: calc(-1 * var(--space-lg));
    margin-right: calc(-1 * var(--space-lg));
    padding: var(--space-3xl) var(--space-lg);
    border-radius: 0;
  }

  @media (min-width: 1000px) {
    .what-to-expect {
      margin-left: calc(-50vw + 500px - var(--space-lg));
      margin-right: calc(-50vw + 500px - var(--space-lg));
      padding-left: calc(50vw - 500px + var(--space-lg));
      padding-right: calc(50vw - 500px + var(--space-lg));
    }
  }
</style>
